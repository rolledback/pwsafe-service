#!/bin/sh

# Get list of staged files before formatting
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)

if [ -z "$STAGED_FILES" ]; then
  exit 0
fi

# Run prettier format on frontend
cd frontend && npm run format:fix
cd ..

# Re-add only the files that were originally staged
echo "$STAGED_FILES" | xargs -d '\n' git add
